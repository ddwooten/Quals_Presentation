\documentclass{beamer}

% These two are for the beamer class
\usepackage{fancyvrb}
\usepackage{color}

% This is for figures
\usepackage{graphicx}

% This is for a pretty code font
\usepackage{courier}

%For tables
\usepackage{multirow}

% For nice matrices
\usepackage{blkarray}

% This is the path to the majority of the figures
\graphicspath{{/home/ddwooten/Dropbox/Dans_Stuff/Documents/UCB/Quals/Presentation/Figures/}}

% For equation formatting
\usepackage{amsmath}

% For sizing summations properly
\usepackage{relsize}

% Biblography Style
\bibliographystyle{elsarticle-num}

\definecolor{forestgreen(web)}{rgb}{0.13, 0.55, 0.13}
\definecolor{cardinal}{rgb}{0.77, 0.12, 0.23}
\mode<presentation>
{
  \definecolor{berkeleyblue}{HTML}{003262}
  \definecolor{berkeleygold}{HTML}{FDB515}
  \usetheme{Boadilla}      % or try Darmstadt, Madrid, Warsaw, ...
  %\usecolortheme{dove} % or try albatross, beaver, crane, ...
  \setbeamercolor{structure}{fg=berkeleyblue,bg=berkeleygold}
  \setbeamercolor{palette primary}{fg=berkeleyblue,bg=berkeleygold} % changed this
  \setbeamercolor{palette secondary}{bg=berkeleyblue,fg=white} % changed this
  \setbeamercolor{palette tertiary}{bg=berkeleyblue,fg=white} % changed this
  \usefonttheme{structurebold}  % or try serif, structurebold, ...
  \useinnertheme{circles}
  \setbeamertemplate{navigation symbols}{}
  \setbeamertemplate{caption}[numbered]
  \usebackgroundtemplate{}
}

\title[Modelling of Material Transfers in Reactor Fuel Burnup Simulations]{}
\author{Daniel D. Wooten}
\institute{UC Berkeley}
\date{October 20\textsuperscript{th}, 2017}

\begin{document}

\frame{\titlepage}

\begin{frame}

\frametitle{Outline}

    \begin{itemize}
        \item Molten salt reactors ( MSR ) 
        \item Fuel salt evaluation 
        \item ADDER
        \item Keeping the problem linear
        \item The optimal solution
        \item Modifying the Bateman equations
        \item Designing for parallel operation
        \item Verification and Vallidation
        \item Future Work
        \item References
    \end{itemize}

\end{frame}

\begin{frame}
\frametitle{How much code do you want to see?}

    \begin{figure}
        \centering
        \includegraphics[width=0.75\paperwidth, keepaspectratio]{Grand_Teton}
        \caption{View from the summit of Mt. Brown, elevation 8,566ft.}
        \label{fig:msr_pic}
    \end{figure}

\end{frame}

\begin{frame}
\frametitle{What is an MSR?}

    \begin{figure}
        \centering
        \includegraphics[width=0.5\paperwidth, keepaspectratio]{MSR}
        \caption{Figure coutesey of Idaho National Labs}
        \label{fig:msr_pic}
    \end{figure}

\end{frame}

\begin{frame}
\frametitle{Fuel Salt Selection}

Considerations \ldots

    \begin{itemize}
        \item Structural materials corrosion 
        \item Heavy element solubility
        \item Isotopic evolution
    \end{itemize}

\end{frame}

\begin{frame}
\frametitle{The question}

How does the fuel salt composition in a molten salt fueled reactor change over
time in response to both nuclear fuel burnup and reactor operator actions?

\end{frame}

\begin{frame}
\frametitle{Finding the answer}

The only general purpose tool available, Monteburns, only addresses isotopic
evolution.

\hspace{2cm}

For better answers we need better tools.

\end{frame}

\begin{frame}
\frametitle{Pertinent phenomenon}

    \begin{itemize}
        \item Solubility
        \item Reduction - Oxidation ( Redox ) potential of the salt
        \item Reactor reactivity
        \item Available chemical forms
    \end{itemize}

\end{frame}

\begin{frame}
\frametitle{Advanced Dynamic Depletion Extension for Reprocessing - ADDER}

A source code modification to the SERPENT 2 Monte Carlo code which enables the
user to \ldots

    \begin{itemize}
        \item define material transfers into, out of, and between SERPENT materials
        \item define and enforce relationships between isotopes, elements, and chemicals in SERPENT materials
        \item define system $k$-eigenvalue targets
        \item define a weighted-average target for the valance state of a given SERPENT material
    \end{itemize}

\end{frame}

\begin{frame}
\frametitle{Best practices and ADDER}

    \begin{itemize}
        \item Input
        \item Output
        \item Failures
        \item Stlye
        \item Architecture
        \item Testing
        \item Documentation
    \end{itemize}

\end{frame}

\begin{frame}
\frametitle{How does it all work?}

Observe the humble \textbf{\textit{stream}}

\hspace{2cm}

\small{\texttt{stream to Tank from Reactor group UF4 type feed form cont}}

\end{frame}

\begin{frame}
\frametitle{The group}

\small{\texttt{stream to Tank from Reactor \textbf{group UF4} type feed form cont}}

\hspace{2cm}

\texttt{grp UF4}\\
\texttt{F   4}\\
\texttt{U   1   isos    2}\\
\texttt{    U-233    5}\\
\texttt{    U-238   95}

\end{frame}

\begin{frame}
\frametitle{Constituent relationships}

\texttt{rng PuF3    min 0.0 max 0.01}

\hspace{2cm}

\texttt{rto FLiBe   min 4   max 99  grp2    UF4}

\end{frame}

\begin{frame}
\frametitle{Charge balancing}

Fission events may be eiter be reducing or oxidizing in nature. Operator
actions may be either reducing or oxidizing.

\hspace{2cm}

$UserTarget = \sum\limits_{e}^{E}w_{e}*N_{e}$

\end{frame}

\begin{frame}
\frametitle{Reactivity control}

    \begin{equation}
    \label{reactivity}
        k_{eff} = p_{n\ell}\left(\frac{\nu_{f}\Sigma_{f}}{\Sigma_{a}}\right)
    \end{equation}

    \begin{equation}
    \label{reactivity_sum}
        k_{eff} = p_{n\ell}\left(\frac{\sum\limits_{i}^{I}\nu_{f}^{i}\Sigma_{f}^{i}}{\sum\limits_{i}^{I}\Sigma_{a}^{i}}\right)
    \end{equation}

\end{frame}

\begin{frame}
\frametitle{Reactivity control}

    \begin{equation}
    \label{nufis}
        \nu_{f}^{i}\Sigma_{f}^{i} = \frac{\int\limits_{0}^{\infty}\nu_{f}^{i}(E)\Sigma_{f}^{i}(E)\phi(E)dE}{\int\limits_{0}^{\infty}\phi(E)dE}
    \end{equation}

\end{frame}

\begin{frame}
\frametitle{Reactivity control}

    \begin{equation}
    \label{max_reac}
        \frac{k_{eff}^{max}}{p_{n\ell}}\sum\limits_{i}^{I}\Sigma_{a}^{I} - \sum\limits_{i}^{I}\nu_{f}^{i}\Sigma_{f}^{i} < 0
    \end{equation}

    \begin{equation}
    \label{max_reac}
        \frac{k_{eff}^{min}}{p_{n\ell}}\sum\limits_{i}^{I}\Sigma_{a}^{I} - \sum\limits_{i}^{I}\nu_{f}^{i}\Sigma_{f}^{i} > 0   
    \end{equation}

\end{frame}

\begin{frame}
\frametitle{Linear optimization}

    The simplex algorithm

\end{frame}

\begin{frame}
\frametitle{CLP}

    \textbf{COIN-OR} \textbf{L}inear \textbf{P}rogramming is part of the larger
    \textit{Computational Infrastructure for Operations Research} project
    - a sizable, capabale, well documented, and well maintained, open-source
     library for solving convex optimization problems. CLP, primarily written
     by John J. Forrest from IBM Research, as noted by 
     \cite{gearhart_comparison_2013} ``\textit{was the best solver of} [the open-source linear programming solvers] \textit{considered, in terms of
     capability and performance.}"

     \par

     While CLP is not as fast as a commerical solver, say CPLEX, it is plenty
     fast. For an LP problem with $10^{11}$ float entries CLP was 2.75x slower
     than CPLEX - finishing in 616s. 

\end{frame}

\begin{frame}[shrink=22]
\frametitle{Bringing it all together}

    \begin{equation*}
        \begin{blockarray}{cccccccccc}
                               &                   & [0,1]             &
            [0,1]              & (-\infty,\infty)  & (-\infty,\infty)  &
            [0,1]              & (-\infty,\infty)  & [0,1]             &
            (-\infty,\infty)  \\ 
                               &                   & g_{1}             &
            g_{2}              & s_{1}             & s_{2}             &
            E_{f}^{1}          & E_{d}^{1}         & I_{f}^{1}         &
            I_{d}^{1} \\
                               &                   &                   &
                               &                   &                   &
                               &                   &                   &
             \\ 
            \begin{block}{cc[cccccccc]}
            [-1,0]             & E_{f}^{1}         & f_{g_{1}}^{E^{1}} &
            f_{g_{2}}^{E^{1}}  &                   &                   &
            -1                 &                   &                   &
             \\
            {[0,0]}            & E_{d}^{1}         &                   &
                               & f_{s_{1}}^{E^{1}} & f_{s_{2}}^{E^{1}} &
                               & -1                &                   &
             \\
            {[0,0]}            & E_{b}^{1}         &                   &
                               &                   &                   &
            1                  & -1                &                   &
             \\
            {[-1,0]}           & I_{f}^{1}         & f_{g_{1}}^{I^{1}} &
            f_{g_{2}}^{I^{1}}  &                   &                   &
                               &                   & -1                &
             \\
            {[0,0]}            & I_{d}^{1}         &                   &
                               & f_{s_{1}}^{I^{1}} & f_{s_{2}}^{I^{1}} &
                               &                   &                   &
            -1 \\
            {[0,0]}            & I_{b}^{1}         &                   &
                               &                   & 1                 &
            -1 \\
            {(-\infty,0]}      & \rho_{max}        &                   &
                               &                   &                   &
                               &                   & \alpha            &
             \\
            {[0,\infty)}       & \rho_{min}        &                   &
                               &                   &                   &
                               &                   & \beta             & 
             \\
            {[m,M]}        & Oxi               &                   &
                               &                   &                   &
             oxi^{E^{1}}       &                   &                   &
             \\
            {[0,0]}            & Pres              &                   &
                               & 1                 & 1                 &
                               &                   &                   &
             \\
            \end{block}
        \end{blockarray}
    \end{equation*}

\end{frame}


















\begin{frame}
\frametitle{In conclusion\ldots}

    Questions?

\end{frame}

\begin{frame}
\frametitle{Acknowledgements}

    This material is based upon work supported under a Department of Energy,
    Office of Nuclear Energy, Integrated University Program Graduate Fellowship.

\end{frame}

\begin{frame}[allowframebreaks]
\frametitle{References}

%\bibliography{Quals}

\end{frame}

\begin{frame}
\frametitle{Corrosion by fuel salts}

    \begin{itemize}
        \item 316 Stainless steel, in a 316L stainless steel crucible, in FLiNaK (46.5\%LiF - 11.5\%NaF - 42\%KF) salt has a reported corrosion rate of 17.1$\mu$m/yr. \cite{zheng_corrosion_2015}
        \item 316 Stainless steel, in a 316L stainless steel crucible, in FLiBe salt has a reported corrosion rate of 125$\mu$m/yr $\pm$12.5$\mu$m/yr. \cite{sellers_materials_2012}
    \end{itemize}

\end{frame}

\begin{frame}
\frametitle{Heavy element solubility}

    \begin{figure}
        \centering
        \includegraphics[width=0.5\paperwidth, keepaspectratio]{LiF_UF4_ThF4_Liquidus}
        \caption{Figure 5.2 from \cite{rosenthal_development_1972}}
        \label{fig:lifufthf_liquidus}
    \end{figure}

\end{frame}

\begin{frame}
\frametitle{Redox potential and oxidation state}

    \begin{equation}
    \label{Nernst}
        \epsilon_{i} = \epsilon_{i}^{o} + \frac{RT}{z\mathfrak{J}}\ln\left(\frac{[oxid]}{[red]}\right)
    \end{equation}

\end{frame}

\begin{frame}
\frametitle{Simplex 1}

    Maximize $f(x_{0},\ldots,x_{n})$ where $f$ is linear, $x_{i}\geq0$ subject
    to $Mx=v$ where $M$ is an $mxn$ matrix and $v$ is an $mx1$ column vector.

\end{frame}

\begin{frame}
\frametitle{Simplex 2}

    This example is taken from \texttt{Linear Algebra} by Cherney et. al.

    \hspace{2cm}

    Maximize $f(x,y,z,w) = 3x - 3y - z + 4w$ subject to constraints \ldots

    \hspace{2cm}

    \begin{equation}
    \label{c1}
        c_{1} := x + y + z + w = 5
    \end{equation}

    \begin{equation}
    \label{c2}
        c_{2} := x + 2y + 3z + 2w = 6 
    \end{equation}

\end{frame}
    
\begin{frame}
\frametitle{Simplex 3}

    In the event that $x_{i} \ngeq 0$ simply define a new variable $x_{k} = x_{i} - \beta$ where $\beta$ is chosen to satisfy the $\geq$ requirement.\\
    The same solution applies to contraints which are not equalities.\\
    And what happens if all your coefficients in the last row are positive from
    the get go? Add more slack variables and ramp up the $\alpha$ on each one,
    subtract them from the constraints and the objective.

\end{frame}

\end{document}
